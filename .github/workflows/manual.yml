name: health cheaks
on:
  push:
jobs:
  build:
    runs-on: ubuntu-latest
    container: node:10.18-jessie
    services:
      redis:
        image: redis
        options: --health-cmd "redis-cli ping" --health-interval 10s --health-timeout 5s --health-retries 5
    steps:
    - name: checkout
      uses: actions/checkout@v2
    - uses: browserstack/github-actions/setup-env@master
      with:
        username: "${{ secrets.BROWSERSTACK_USERNAME }}"
        access_key: "${{ secrets.BROWSERSTACK_ACCESS_KEY }}"
    - uses: browserstack/github-actions/setup-local@master
      with:
        local_testing: start
    - uses: browserstack/github-actions/setup-local@master
      with:
        local_testing: stop
